@using DataContext
@using DataContext.Constants
@using DataContext.Until

@{
    var model = (m_taikhoan)Model;
    var regis = (m_registration_info)ViewBag.regis;
    var room = new m_room_order();
    if (ViewBag.room != null)
    {
        room = (m_room_order)ViewBag.room;
    }
    List<Sp_GetActivityRegis_Result> regisAct = (List<Sp_GetActivityRegis_Result>)ViewBag.regisAct;
}


<div class="white-box"></div>
<div class="col-sm-6" style="float: right">
    <h3 id="btn-cancel" class="box-title m-b-0" style="float: right; cursor: pointer;">
        <i class="ti-arrow-left" style="padding-right: 10px"></i><a>@(ASS_35.Resources.HomeText.ButtonBack)</a>
    </h3>
</div>


<form class="form-validate-jquery" id="form_data" method="post" enctype="multipart/form-data">
    <div class="row" style="width: 100%">
        <div class="wrap-form"  style="width: 100%">
            <div class="panel registration-form">
                <div class="panel-body">

                    <!--GENERAL INFORMATION-->
                    <div class="panel panel-default formassa section1 sec-head" style="clear: both;">
                        <div class="panel-heading">
                            <div class="new-heading">
                                <h5 class="panel-title">GENERAL INFORMATION</h5>
                            </div>

                        </div>

                        <div class="panel-body content-sec1">
                            <div class="row">
                                <div class="col-sm-4 col-xs-12 col-md-4">

                                    <div class="form-group">
                                        <label class="">Title Name: </label>
                                        @if (regis.titlename != "OTH")
                                        {
                                            <script>
                                                $("#salut").val("@regis.titlename");
                                            </script>
                                        }
                                        <select class="selectbox required data-req" name="sec1_title" id="salut">
                                            <option value="">select your title name</option>
                                            <option value="MR">Mr.</option>
                                            <option value="MS">Ms.</option>
                                            <option value="MRS">Mrs.</option>
                                            <option value="MRS">Prof</option>
                                            <option value="MRS">Dr.</option>
                                            <option value="OTH">Other</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-sm-3 col-xs-6 specify_oth hide">
                                    <div class="form-group">
                                        <label><br></label>
                                        @if (regis.titlename == "OTH")
                                        {
                                            <label>@regis.titleOther</label>
                                        }
                                    </div>
                                </div>


                            </div>
                            <input type="hidden" name="code" id="code_ps" />
                            <div class="row">
                                <div class="col-sm-4 col-xs-12">
                                    <div class="form-group">
                                        <label>Last Name: @regis.lastname  </label>

                                    </div>
                                </div>
                                <div class="col-sm-4 col-xs-12">
                                    <div class="form-group">
                                        <label>First Name: @regis.firstname   </label>

                                    </div>
                                </div>
                                <div class="col-sm-4 col-xs-12">
                                    <div class="form-group">
                                        <label>Middle Initial: @regis.middleinitial</label>

                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12 col-xs-12">
                                    @if (regis.gender == 1)
                                    {
                                        <script>
                                            $("input[name=sec1_gender]")[0].checked = true
                                        </script>
                                    }
                                    else
                                    {
                                        <script>
                                            $("input[name=sec1_gender]")[1].checked = true
                                        </script>
                                    }
                                    <label class="display-block">Gender: </label>
                                    <div class="col-sm-3 col-md-6">
                                        <label class="radio-inline">
                                            <input type="radio" name="sec1_gender" class="styled data-req" value="M">
                                            Male
                                        </label>
                                    </div>
                                    <div class="col-sm-3 col-md-6">
                                        <label class="radio-inline">
                                            <input type="radio" name="sec1_gender" class="styled" value="F">
                                            Female
                                        </label>
                                    </div>
                                </div>

                            </div> <!--row-->

                            <div class="row">
                                <div class="col-sm-4 col-xs-12">
                                    <div class="form-group">
                                        <label>Position: @regis.position</label>

                                    </div>
                                </div>
                                <div class="col-sm-4 col-xs-12">
                                    <div class="form-group">
                                        <label>Department: @regis.department</label>

                                    </div>
                                </div>
                                <div class="col-sm-4 col-xs-12">
                                    <div class="form-group">
                                        <label>Institution: @regis.organization  </label>

                                    </div>
                                </div>
                            </div>
                            <div class="row" style="margin-top: 10px;">
                                <div class="col-sm-8 col-xs-12">
                                    <div class="form-group">
                                        <label>Office Address: @regis.address</label>

                                    </div>
                                </div>
                                <div class="col-sm-4">

                                    <script>
                                        $("select[name=sec1_state]").val("@regis.country");
                                    </script>

                                    <div class="form-group state_">
                                        <label>Country </label>
                                        <select class="selectbox state_select " name="sec1_state">
                                            <option value=""></option>
                                            <option value="BN-Brunei" data-iconurl="../../assets/demo/assa/state/brunei.jpg">
                                                Brunei Darussalam
                                            </option>
                                            <option value="KH-Cambodia" data-iconurl="../../assets/demo/assa/state/cambodia.jpg">
                                                Cambodia
                                            </option>
                                            <option value="ID-Indonesia" data-iconurl="../../assets/demo/assa/state/Indonesia.jpg">
                                                Indonesia
                                            </option>
                                            <option value="LA-Laos" data-iconurl="../../assets/demo/assa/state/lao.jpg">
                                                Laos PDR
                                            </option>
                                            <option value="MY-Malaysia" data-iconurl="../../assets/demo/assa/state/malaysia.jpg">
                                                Malaysia
                                            </option>
                                            <option value="MM-Myanmar" data-iconurl="../../assets/demo/assa/state/myanmar.jpg">
                                                Myanmar
                                            </option>
                                            <option value="PH-Philippines" data-iconurl="../../assets/demo/assa/state/philipine.jpg">
                                                Philippines
                                            </option>

                                            <option value="SG-Singapore" data-iconurl="../../assets/demo/assa/state/singapore.jpg">
                                                Singapore
                                            </option>
                                            <option value="TH-Thailand" data-iconurl="../../assets/demo/assa/state/thailand.jpg">
                                                Thailand
                                            </option>
                                            <option value="VI" data-iconurl="../../assets/demo/assa/state/vietnam.jpg">
                                                Viet Nam
                                            </option>


                                        </select>

                                    </div>
                                </div>

                            </div>

                            <div class="row hightlight" style="padding-bottom: 15px;">
                                <div class="col-md-12">
                                    <script>
                                        $("input[name=sec1_meal]").val(@regis.mealprefer);
                                    </script>
                                    <label class="display-block text-semibold ">Dietary Requirement </label>
                                    <div class="col-sm-3 col-md-3">
                                        <label class="radio-inline">
                                            Vegetarian
                                            <input type="radio" name="sec1_meal" class="styled" value="1">

                                        </label>
                                    </div>
                                    <div class="col-sm-3 col-md-3">
                                        <label class="radio-inline">
                                            Non-Vegetarian
                                            <input type="radio" name="sec1_meal" class="styled" value="2">

                                        </label>
                                    </div>
                                    <div class="col-sm-3 col-md-3">
                                        <label class="radio-inline">
                                            Halal Food
                                            <input type="radio" name="sec1_meal" class="styled" value="3">

                                        </label>
                                    </div>
                                    <div class="col-sm-3 col-md-3">
                                        <label class="radio-inline">
                                            Normal
                                            <input type="radio" name="sec1_meal" class="styled" value="0">

                                        </label>
                                    </div>
                                    <div class="col-sm-12 col-md-12 " style="padding: 10px 0 5px 0">
                                        <label>Specify requirement: @regis.meal_other </label>

                                    </div>
                                </div>

                            </div>
                            <div class="row hightlight">
                                <div class="col-sm-12">
                                    <label class="display-block text-semibold" style="margin-top: 10px;">Contact information </label>
                                </div>
                                <div class="col-sm-4 col-xs-12">
                                    <div class="form-group">
                                        <label>Telephone Number: @regis.telephone </label>

                                    </div>
                                </div>
                                <div class="col-sm-4 col-xs-12">
                                    <div class="form-group">
                                        <label>Cellphone Number: @regis.cellphone </label>

                                    </div>
                                </div>
                                <div class="col-sm-4 col-xs-12">
                                    <div class="form-group">
                                        <label>Email Address: @regis.email  </label>

                                    </div>
                                </div>
                            </div>
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <div class="new-heading" style="width:100% ">
                                        <h5 class="panel-title">ACCOMPANYING PERSON(S) (IF ANY)</h5>
                                    </div>

                                </div>
                                <div class="panel-body content-sec1_2">
                                    <div class="row">
                                        <div class="col-md-1 " align=""><label> Person: @regis.acc_per1</label></div>

                                    </div>
                                    <div class="row">
                                        <div class="col-md-1 " align=""><label> Person: @regis.acc_per2</label></div>

                                    </div>
                                    <div class="row">
                                        <div class="col-md-1 " align=""><label> Person: @regis.acc_per3</label></div>

                                    </div>
                                    <div class="row" style="padding: 0 15px">
                                        <label> Special requirements: @regis.acc_spec</label>

                                    </div>
                                </div>
                            </div>
                        </div> <!--panel body-->
                    </div><!--panel-->

                    <div class="panel panel-default formassa section3 flightcontent sec-head" style="clear: both;">
                        <div class="panel-heading">
                            <div class="new-heading">
                                <h5 class="panel-title">FLIGHT DETAILS</h5>
                            </div>
                        </div>
                        <div class="panel-body content-sec3">
                            <!--test-->
                            <div>
                                <div class="content-divider text-muted form-group"><span><h5 class="f12">ARRIVAL</h5></span></div>


                                <div class="row">
                                    <div class="form-group col-md-6">
                                        <script>
                                            $("select[name=arr_con]").val("@regis.arr_con");
                                        </script>
                                        <label>Connecting flight from:</label>
                                        <select name="arr_con" class="form-control required">
                                            <option value="" selected="selected" disabled="">Select city </option>
                                            <option value="hn">Ha Noi </option>
                                            <option value="dn">Da Nang</option>
                                            <option value="hcm">Ho Chi Minh</option>
                                        </select>
                                    </div>
                                    <div class="connection-wrap">

                                        <div class="col-sm-2 col-xs-3">
                                            <div class="form-group">
                                                <label class="control-label">Airline: @regis.conarr_airline</label>

                                            </div>
                                        </div>
                                        <div class="col-sm-2 col-xs-3">
                                            <div class="form-group">
                                                <label class="control-label">Flight No: @regis.conarr_flight</label>

                                            </div>
                                        </div>
                                        <div class="col-sm-2 col-xs-3">

                                            <div class="form-group">
                                                <label class="control-label">Date: @regis.conarr_date</label>

                                            </div>
                                        </div>
                                        <div class="col-sm-2 col-xs-3">

                                            <div class="form-group">
                                                <label class="control-label">Time : @regis.conarr_time</label>


                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--test-->
                            <!--test-->
                            <div style="margin-top:50px;">
                                <div class="content-divider text-muted form-group"><span><h5 class="f12">DEPARTURE</h5></span></div>


                                <div class="row">
                                    <div class="form-group col-md-6">
                                        <script>
                                            $("select[name=dep_con]").val("@regis.dep_con");
                                        </script>
                                        <label>Connecting flight from:</label>
                                        <select name="dep_con" class="form-control required">
                                            <option value="" selected="selected" disabled="">Select city </option>
                                            <option value="hn">Ha Noi </option>
                                            <option value="dn">Da Nang</option>
                                            <option value="hcm">Ho Chi Minh</option>
                                        </select>
                                    </div>
                                    <div class="connection-wrap">

                                        <div class="col-sm-2 col-xs-3">
                                            <div class="form-group">
                                                <label class="control-label">Airline : @regis.condep_airline</label>

                                            </div>
                                        </div>
                                        <div class="col-sm-2 col-xs-3">
                                            <div class="form-group">
                                                <label class="control-label">Flight No: @regis.condep_flight</label>

                                            </div>
                                        </div>
                                        <div class="col-sm-2 col-xs-3">
                                            <div class="form-group">
                                                <label class="control-label">Date : @regis.condep_date</label>

                                            </div>
                                        </div>
                                        <div class="col-sm-2 col-xs-3">
                                            <div class="form-group">
                                                <label class="control-label">Time: @regis.condep_time</label>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--test-->
                        </div>
                    </div><!--panel-->
                    <div class="panel panel-default formassa section4 sec-head" style="clear: both;">
                        <div class="panel-heading">
                            <div class="new-heading">
                                <h5 class="panel-title">INDICATE YOUR PARTICIPATION </h5>
                            </div>
                        </div>
                        <div class="panel-body" style="padding: 20px;">
                            <div class="">
                                <table class="table table-bordered part4form">
                                    <thead>
                                        <tr>
                                            <th class="text-center active tb-1" style="width: 348px;"><p class="text-bold">Activity</p></th>
                                            <th class="text-center active tb-2"><p class="text-bold">Participation</p></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var item in regisAct)
                                        {
                                            <tr>
                                                <td>
                                                    @item.actName
                                                </td>
                                                <td>
                                                    @if (item.value0 == 1)
                                                    {
                                                        <label> Yes</label>
                                                    }
                                                    else
                                                    {
                                                        <label> No</label>
                                                    }
                                                </td>
                                            </tr>
                                        }


                                    </tbody>
                                </table>
                            </div>
                        </div> <!--panel body-->
                    </div><!--panel-->
                    <!--hotel-->
                    <div class="panel panel-default formassa section2 sec-head" style="clear: both;">
                        <div class="panel-heading">
                            <div class="new-heading">
                                <h5 class="panel-title">HOTEL REGISTRATION</h5>
                            </div>
                        </div>

                        <div class="panel-body content-sec2" style="padding: 20px;">

                            <p>Sheraton Hotel </p><p>
                                Typeroom: @if (room.idRoomType == 1)
                                {<span>Duluxe</span>}
                                else if (room.idRoomType == 2)
                                {
                                    <span>Premium Deluxe Ocean View</span>
                                }
                                else
                                {
                                    <span>Club Ocean View</span>
                                }
                            </p> <p>
                                Room option: @if (room.idRoomType == 1)
                                {<span>SGL</span>}
                                else if (room.idRoomType == 2)
                                {
                                    <span>DBL</span>
                                }
                                else
                                {
                                    <span>TWIN</span>
                                }
                            </p>
                            <p>Smoking: @if (room.idRoomOption2 == 1)
                            {<span>Yes</span>}
                            else
                            {<span>None</span>}</p>
                        </div> <!--panel body-->
                    </div>
                    <div class="text-left cm-quote">
                        <p>Any questions please contact:</p>
                        <p>- Tel: (84-24)36281193 – 36281191</p>
                        <p>- Fax: (84-24) 38697886.</p>

                    </div>
                    <!--panel-->
                    <!--Hotel reservation-->
                    <!--FLIGHT-->
                    <!--CREDIT CARD DETAILS-->
                <div class="text-center">
                    @*<div class="g-recaptcha" data-sitekey="6LeUZi0UAAAAAN0cfbyqhO_Jn7uylbF7q8_zvS0O" data-callback="callbac"></div>*@
                    <div class="g-recaptcha" data-sitekey="6LeQZi0UAAAAADHvpGph9O5oL1jrq-sDCOdE-h4s" data-callback="callbac"></div>
                </div>
                @Html.Action("ShowCurrentAccountStatus", "Common", new {status = ViewBag.status})
                <div class="form-group" id="frm-edit-status" style="padding-left: 20px;">
                    <div class="form-check">
                        @if (ViewBag.status == SystemMessageConst.StatusConst.Active)
                        {
                            <label class="custom-control custom-radio">
                                <input type="checkbox" name="radio" value="@SystemMessageConst.StatusConst.Deactive" class="custom-control-input"> <span class="custom-control-indicator"></span><span class="custom-control-description">@(ASS_35.Resources.HomeText.ButtonLockAccount)</span>
                            </label>
                        }
                        @if (ViewBag.status == SystemMessageConst.StatusConst.Pending)
                        {
                            <label class="custom-control custom-radio">
                                <input type="radio" name="radio" value="@SystemMessageConst.StatusConst.Active" class="custom-control-input"> <span class="custom-control-indicator"></span><span class="custom-control-description">@(ASS_35.Resources.HomeText.ActiveStatus)</span>
                            </label>
                            <label class="custom-control custom-radio">
                                <input type="radio" name="radio" value="@SystemMessageConst.StatusConst.Deactive" class="custom-control-input"> <span class="custom-control-indicator"></span><span class="custom-control-description">@(ASS_35.Resources.HomeText.ButtonDeactiveAccount)</span>
                            </label>
                        }
                        @if (ViewBag.status == SystemMessageConst.StatusConst.Deactive)
                        {
                            <label class="custom-control custom-radio">
                                <input type="checkbox" name="radio" value="@SystemMessageConst.StatusConst.Active" class="custom-control-input"> <span class="custom-control-indicator"></span><span class="custom-control-description">@(ASS_35.Resources.HomeText.ButtonActiveAccount)</span>
                            </label>
                        }
                    </div>
                </div>
                @if (ViewBag.myRole == SystemMessageConst.RoleConst.Admin)
                {
                    <div class="form-group" id="fr-lydo" style="display: none;">
                        <label class="col-md-12">@(ASS_35.Resources.HomeText.Reason)</label>
                        <textarea class="form-control" rows="5" id="txt-reason"></textarea>
                    </div>
                }
                
                <div class="form-group">
                    <button class="btn btn-success waves-effect waves-light btn-save" type="button">
                        <span class="btn-label">
                            <i class="ti-save"></i>
                        </span>@(ASS_35.Resources.HomeText.ButtonSave)
                    </button>
                </div>

                   

                </div>
            </div>
        </div>

    </div>
</form>
<script>
    $(function() {
        BindButtonSaveClick();
        BindButtonCancelClick();
        BindButonStatusChange();
    });



    function BindButtonCancelClick() {
        $("#btn-cancel").click(function() {
            LoadPage(
                '@Url.Action("DelegateManager", "ManagerAccount")');
        });
    }
    function BindButonStatusChange() {
        $('input[name=radio]').change(function () {
            if ($('input[name=radio]:checked').val() == "@SystemMessageConst.StatusConst.Deactive") {
                $("#fr-lydo").css("display", "block");
                
            } else {
                $("#fr-lydo").css("display", "none");
                
            }
        });
    }
    function RegisterResult(data) {
        if (data.result.IsSuccess === false) {
            QTW_RUN_MESS.alter_Message_Error(data.result.Message);
        } else {
            QTW_RUN_MESS.alter_Message_Success(data.result.Message);
        }
    }
    function BindButtonSaveClick() {
        $(".btn-save").click(function() {
            var infomationData = {
                id: "@(model.id)",
                status: $('input[name=radio]:checked').val(),
                reason: $("#txt-reason").val()
            }
            var formData = new FormData();
            formData.append("data", JSON.stringify(infomationData));
            
            QTW_JQUERY.RUN_AJAX("ajaxPOST", "/ManagerAccount/_EditDelegate", formData, RegisterResult);
        });
    }
</script>