@using DataContext
@using DataContext.Constants
@using DataContext.Until
@{
    var model = (m_taikhoan) Model;
    var lstMem = (List<m_thongtincanhan>) ViewBag.lstMem;
}
<div class="white-box"></div>
<div class="col-sm-6" style="float: right">
    <h3 id="btn-cancel" class="box-title m-b-0" style="float: right; cursor: pointer;">
        <i class="ti-arrow-left" style="padding-right: 10px"></i><a>@(ASS_35.Resources.HomeText.ButtonBack)</a>
    </h3>
</div>
@if (model.idloaitaikhoan == SystemMessageConst.AccountType.Personal)
{
    var person = lstMem.FirstOrDefault();
    if (person == null)
    {
        <p>@(ASS_35.Resources.HomeText.No_data)</p>
    }
    else
    {
        <h3 class="box-title m-b-5">@(ASS_35.Resources.HomeText.Person_Detail)</h3>
        <div class="row">
            <div class="col-lg-12">
                <div class="white-box">
                    <div class="form-group text-left">
                        <label class="control-label">@(ASS_35.Resources.HomeText.Full_Name)</label>
                        <input type="text" class="form-control" placeholder="" value="@(person.hovaten)" readonly="readonly">
                    </div>
                    <div class="form-group text-left">
                        <label class="control-label">@(ASS_35.Resources.HomeText.Gender)</label>
                        <input type="text" class="form-control" placeholder="" value="@(person.gioitinh == true ? ASS_35.Resources.HomeText.Male : ASS_35.Resources.HomeText.Female)" readonly="readonly">
                    </div>
                    <div class="form-group text-left">
                        <label class="control-label">@(ASS_35.Resources.HomeText.Date_of_Birth)</label>
                        <input type="text" class="form-control" placeholder="" value="@(person.ngaysinh.Value.ToString("dd-MM-yyyy"))" readonly="readonly">
                    </div>
                    <div class="form-group text-left">
                        <label class="control-label">@(ASS_35.Resources.HomeText.Email)</label>
                        <input type="text" class="form-control" placeholder="Example@domain.com" value="@(person.email)" readonly="readonly"/>
                    </div>
                    <div class="form-group text-left">
                        <label class="control-label">@(ASS_35.Resources.HomeText.Phone)</label>
                        <input type="text" class="form-control" placeholder="" value="@(person.sodienthoai)" readonly="readonly"/>
                    </div>
                    <div class="form-group text-left">
                        <label class="control-label">@(ASS_35.Resources.HomeText.Address)</label>
                        <input type="text" class="form-control" placeholder="" value="@(person.diachi)" readonly="readonly"/>
                    </div>
                    <div class="form-group text-left">
                        <label class="control-label">@(ASS_35.Resources.HomeText.ID_Card_Passport)</label>
                        <input type="text" class="form-control" placeholder="" value="@(person.cmthochieu)" readonly="readonly"/>
                    </div>
                    <div class="form-group text-left">
                        <label class="control-label">@(ASS_35.Resources.HomeText.Date_created)</label>
                        <input type="text" class="form-control" placeholder="" value="@(DisplayUntils.DisplayDayMonYear(person.ngaycap))" readonly="readonly"/>
                    </div>
                    <div class="form-group text-left">
                        <label class="control-label">@(ASS_35.Resources.HomeText.Expiration_Date)</label>
                        <input type="text" class="form-control" placeholder="" value="@(DisplayUntils.DisplayDayMonYear(person.ngayhethan))" readonly="readonly"/>
                    </div>
                    <div class="form-group text-left">
                        <label class="control-label">@(ASS_35.Resources.HomeText.Place_of_issue)</label>
                        <input type="text" class="form-control" placeholder="" value="@(person.noicap)" readonly="readonly"/>
                    </div>
                    <div class="form-group text-left">
                        <label class="control-label">@(ASS_35.Resources.HomeText.Photo_of_ID_Card_Passport_Front)</label>
                        <div>
                            @if (person.anhcmtmattruoc == null)
                            {
                                <p>@ASS_35.Resources.HomeText.No_data</p>
                            }
                            else
                            {
                                <img src="@(person.anhcmtmattruoc)" style="max-width: 100%; max-height: 400px;">
                            }

                        </div>
                    </div>
                    <div class="form-group text-left">
                        <label class="control-label">@(ASS_35.Resources.HomeText.Photo_of_ID_Card_Passport_Backside)</label>
                        <div>
                            @if (person.anhcmtmatsau == null)
                            {
                                <p>@ASS_35.Resources.HomeText.No_data</p>
                            }
                            else
                            {
                                <img src="@(person.anhcmtmatsau)" style="max-width: 100%; max-height: 400px;">
                            }

                        </div>
                    </div>
                    <div class="form-group text-left">
                        <label class="control-label">@(ASS_35.Resources.HomeText.Number_of_employee_Cards)</label>
                        <input type="text" class="form-control" placeholder="" value="@(person.sothenhabao)" readonly="readonly"/>
                    </div>
                    <div class="form-group text-left">
                        <label class="control-label">@(ASS_35.Resources.HomeText.Photo_employee_Card)</label>
                        <div>
                            @if (person.fileanhthe == null)
                            {
                                <p>@ASS_35.Resources.HomeText.No_data</p>
                            }
                            else
                            {
                                <img src="@(person.fileanhthe)" style="max-width: 100%; max-height: 400px;">
                            }

                        </div>
                    </div>
                </div>
            </div>
        </div>

        var company = (m_thongtincoquan) ViewBag.company;
        if (company != null)
        {
            <h3 class="box-title m-b-5">@(ASS_35.Resources.HomeText.agency_information)</h3>
            <div class="row">
                <div class="col-lg-12">
                    <div class="white-box">
                        <div class="form-group text-left">
                            <label class="control-label">@(ASS_35.Resources.HomeText.Company_Name)</label>
                            <input type="text" class="form-control" placeholder="Example@domain.com" value="@(company.tencoquan)" readonly="readonly">
                        </div>
                        <div class="form-group text-left">
                            <label class="control-label">@(ASS_35.Resources.HomeText.Company_Address)</label>
                            <input type="text" class="form-control" placeholder="Example@domain.com" value="@(company.diachicoquan)" readonly="readonly">
                        </div>
                        <div class="form-group text-left">
                            <label class="control-label">@(ASS_35.Resources.HomeText.Company_Phone)</label>
                            <input type="text" class="form-control" placeholder="Example@domain.com" value="@(company.sodienthoai)" readonly="readonly">
                        </div>
                        <div class="form-group text-left">
                            <label class="control-label">@(ASS_35.Resources.HomeText.Fax)</label>
                            <input type="text" class="form-control" value="@(company.sofax)" readonly="readonly">
                        </div>
                        <div class="form-group text-left">
                            <label class="control-label">@(ASS_35.Resources.HomeText.Company_Email)</label>
                            <input type="text" class="form-control" placeholder="Example@domain.com" value="@(company.emailcoquan)" readonly="readonly">
                        </div>
                        <div class="form-group text-left">
                            <label class="control-label">@(ASS_35.Resources.HomeText.Documentary)</label>
                            <div>
                                <img src="@company.filecongvan" style="max-width: 100%;"/>
                            </div>
                        </div>
                        <div class="form-group">
                            @if (company.trangthaiduatin == 1)
                            {
                                <div>
                                    <a>
                                        <i class="fa fa-check text-success"></i>@(ASS_35.Resources.HomeText.Subscribe_to_forum_postings)
                                    </a>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            </div>
        }
    }
}
else
{
    var company = (m_thongtincoquan) ViewBag.company;
    <h3 class="box-title m-b-5">@(ASS_35.Resources.HomeText.agency_information)</h3>
    <div class="row">
        <div class="col-lg-12">
            <div class="white-box">
                <div class="form-group text-left">
                    <label class="control-label">@(ASS_35.Resources.HomeText.Company_Name)</label>
                    <input type="text" class="form-control" placeholder="Example@domain.com" value="@(company.tencoquan)" readonly="readonly">
                </div>
                <div class="form-group text-left">
                    <label class="control-label">@(ASS_35.Resources.HomeText.Company_Address)</label>
                    <input type="text" class="form-control" placeholder="Example@domain.com" value="@(company.diachicoquan)" readonly="readonly">
                </div>
                <div class="form-group text-left">
                    <label class="control-label">@(ASS_35.Resources.HomeText.Company_Phone)</label>
                    <input type="text" class="form-control" placeholder="Example@domain.com" value="@(company.sodienthoai)" readonly="readonly">
                </div>
                <div class="form-group text-left">
                    <label class="control-label">@(ASS_35.Resources.HomeText.Fax)</label>
                    <input type="text" class="form-control" value="@(company.sofax)" readonly="readonly">
                </div>
                <div class="form-group text-left">
                    <label class="control-label">@(ASS_35.Resources.HomeText.Company_Email)</label>
                    <input type="text" class="form-control" placeholder="Example@domain.com" value="@(company.emailcoquan)" readonly="readonly">
                </div>
                <div class="form-group">
                    @if (company.trangthaiduatin == 1)
                    {
                        <div>
                            <a>
                                <i class="fa fa-check text-success"></i>@(ASS_35.Resources.HomeText.Subscribe_to_forum_postings)
                            </a>
                        </div>
                    }

                </div>
                <div class="form-group text-left">
                    <label class="control-label">@(ASS_35.Resources.HomeText.Documentary)</label>
                    <div>
                        <img src="@company.filecongvan" style="max-width: 100%;"/>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <h3 class="box-title m-b-5">@(ASS_35.Resources.HomeText.Team_Members)</h3>
    <div class="row">
        <div class="col-lg-12">
            <div class="white-box">
                @Html.Action("ListMemberInAccount", "ManagerAccount", new {data = lstMem})
            </div>
        </div>
    </div>
}
<h3 class="box-title m-b-5">@ASS_35.Resources.HomeText.Account_Information</h3>
<div class="row">
    <div class="col-lg-12">
        <div class="white-box">
            <div class="form-group text-left">
                <label class="control-label">@(ASS_35.Resources.HomeText.Appointment)</label>
                @if (model.giaymoi == null)
                {
                    <p class="form-control" style="border: none; color: red;">@ASS_35.Resources.HomeText.No_data</p>
                }
                else
                {
                    <a class="form-control" data-url="@(model.giaymoi)" style="border: none; color: blue; cursor: pointer;" onclick="PreviewPdf(this)" data-toggle='modal' data-target='.bs-example-modal-lg'>@ASS_35.Resources.HomeText.Preview</a>
                }
            </div>
            @Html.Action("AccountManagerButton", "Common", new {status = model.trangthai, hasInvitations = true})
    </div>
</div>
</div>
<div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" style="display: none;" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="myLargeModalLabel"></h4>
            </div>
            <div class="modal-body" style="min-height: 500px">

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger waves-effect text-left" data-dismiss="modal">@(ASS_35.Resources.HomeText.Close)</button>
            </div>
        </div>
    </div>
</div>
<script>
    $(function() {
        BindButtonSaveClick();
        BindButtonCancelClick();
    });

    function PreviewPdf(self) {

        var url = $(self).attr('data-url');
        $('.modal-body').empty();
        $('.modal-body').append("<embed src='/Media/ReadFilePDF?url=" +
            url +
            "' style='min-height: 500px; width: 100%;' />");

    }

    function BindButtonCancelClick() {
        $("#btn-cancel").click(function() {
            LoadPage(
                '@(ViewBag.type == "1" ? Url.Action("DelegateManager", "ManagerAccount") : Url.Action("ReporterManager", "ManagerAccount"))');
        });
    }

    function RegisterResult(data) {
        if (data.result.IsSuccess === false) {
            QTW_RUN_MESS.alter_Message_Error(data.result.Message);
        } else {
            QTW_RUN_MESS.alter_Message_Success(data.result.Message);
        }
    }

    function BindButtonSaveClick() {
        $(".btn-save").click(function() {
            var infomationData = {
                id: "@(model.id)",
                status: $('input[name=radio]:checked').val(),
                reason: $("#txt-reason").val()
            }
            var formData = new FormData();
            formData.append("data", JSON.stringify(infomationData));
            formData.append("file1", $("#btn-venue-file")[0].files[0]);
            QTW_JQUERY.RUN_AJAX("ajaxPOST", "/ManagerAccount/_EditDelegateManager", formData, RegisterResult);
        });
    }
</script>